if(function(e){"use strict";var t,o=[],n=e.document,r=e.MutationObserver||e.WebKitMutationObserver,a=function(e,a){o.push({selector:e,fn:a}),t||(t=new r(i)).observe(n.documentElement,{childList:!0,subtree:!0}),i()},i=function(){for(var e,t,r=0,a=o.length;r<a;r++){e=o[r];for(var i,d=0,s=(t=n.querySelectorAll(e.selector)).length;d<s;d++)(i=t[d]).ready||(i.ready=!0,e.fn.call(i,i))}},d=function(){var e="bs_localstorage_test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}},s=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e.search);return null===o?null:decodeURIComponent(o[1].replace(/\+/g," "))},l=function(e,t){var o=s(e,"broadstreet_preview_zone"),n=s(e,"broadstreet_preview_zone_alias"),r=s(e,"broadstreet_preview_ad"),a=s(e,"broadstreet_all_zones");return o&&r?{zone_id:o,zone_alias:n,ad_id:r,all_zones:a}:null},c=function(e){for(var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<16;n++)t+=o.charAt(Math.floor(62*Math.random()));return e+t};e.broadstreet=window.broadstreetLoaded?e.broadstreet:function(){var t=(new Date).getTime(),o={},n="",r=[],i=(document.head,document.body,!1),s={},u=!1,h=null,f=!1,m={altZoneWhitelist:[],altZoneShortlist:[],autoAttach:[],autoAttachAndWatch:[],uid:d()?localStorage.bsid||(localStorage.bsid=c("random-")):null,callback:void 0,deviceOverride:null,disableCookies:!1,domain:window.broadstreetDomain||"ad.broadstreetads.com",hostname:e.hostname,hardForce:!1,keywords:window.broadstreetKeywords||[],loadConfigSync:!1,location:e.location,networkId:null,noRotate:!1,onlyVisible:!1,preview:!1,protocol:location.protocol,passTargetsToDestination:!1,selector:"broadstreet-zone",containerCss:"display: block;",seed:null,softKeywords:!0,targets:window.broadstreetTargets||{},ts:(new Date).getTime(),uriKeywords:!1,useAltZone:function(){return!1},useZoneAliases:!1,useCachebuster:!0,zoneOptions:{}},b=function(e){var t,o,n,r,a;if(o=[],a=/%20/g,n=function(e,t){t="function"==typeof t?t():t||"",o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)},e instanceof Array)for(r in e)n(r,e[r]);else for(t in e)g(t,e[t],n);return o.join("&").replace(a,"+")},w=function(e,t){var o=e.getBoundingClientRect();return!(o.top>=0&&o.left>=0&&o.bottom<=(window.innerHeight||document.documentElement.clientHeight)*t&&o.right<=(window.innerWidth||document.documentElement.clientWidth))},g=function(e,t,o){var n,r,a,i;if(i=/\[\]$/,t instanceof Array)for(r=0,a=t.length;r<a;r++)i.test(e)?o(e,t[r]):g(e+"["+("object"==typeof t[r]?r:"")+"]",t[r],o);else if("object"==typeof t)for(n in t)g(e+"["+n+"]",t[n],o);else o(e,t)},p=function(){if(!i){var e=r.shift();if(e){var t=!1,o=document.createElement("script");o.type="text/javascript",o.async=!0,h&&(e.id==h.zone_alias||e.id.indexOf(h.zone_id)>=0)?(o.src=C(h.ad_id,e),h.all_zones||(h=null)):o.src=O(e.id,e.options)+"&target="+e.el.id,o.onload=o.onreadystatechange=o.onerror=function(){t||o.readyState&&"loaded"!==o.readyState&&"complete"!==o.readyState||(t=!0,i=!1,p(),o.onload=o.onreadystatechange=o.onerror=null,document.head&&o.parentNode&&document.head.removeChild(o))},i=!0,document.head.insertBefore(o,document.head.lastChild)}}},y=function(e,t){if("true"!=e.getAttribute("data-autoattached")){for(var o=t.position||"afterend",n=document.createElement(m.selector),r=Object.keys(t),a=0;a<r.length;a++)n.setAttribute(r[a],t[r[a]]);"replace"==o?e.innerHTML=n.outerHTML:e.insertAdjacentHTML(o,n.outerHTML),e.setAttribute("data-autoattached","true")}},v=function(e,t){e=e||{},t=t||{};for(var o={},n=Object.keys(e).concat(Object.keys(t)),r=0;r<n.length;r++)t.hasOwnProperty(n[r])?o[n[r]+""]=t[n[r]]:o[n[r]+""]=e[n[r]];return o};o.autoAttach=function(e){var t,o,n;t=Object.keys(e||m.autoAttach);for(var r=0;r<t.length;r++){try{o=document.querySelectorAll(t[r])}catch(e){console.debug("No elements found for selector",t[r]),o=[]}if(o.length){n=m.autoAttach[t[r]],Array.isArray(n)||(n=[n]);for(var a=0;a<n.length;a++)for(var i=0;i<o.length;i++)y(o[i],n[a])}}},o.autoAttachAndWatch=function(e){for(var t=Object.keys(e||m.autoAttachAndWatch),o=0;o<t.length;o++){var n=m.autoAttachAndWatch[t[o]];a(t[o],function(e){return function(t){Array.isArray(e)||(e=[e]);for(var o=0;o<e.length;o++)y(t,e[o])}}(n))}};var A=function(e,t,o){var n;return function(){var r=this,a=arguments,i=o&&!n;clearTimeout(n),n=setTimeout((function(){n=null,o||e.apply(r,a)}),t),i&&e.apply(r,a)}},k=o.pageReady=function(e){return"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?(e&&e(),!0):(e&&document.addEventListener("DOMContentLoaded",e),!1)},_=function(){if(function(){var e=m.selector+" { "+m.containerCss+" }"+m.selector+"-container-alt { "+m.containerCss+" }"+m.selector+"-container { "+m.containerCss+" }",t=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e)),t.appendChild(o)}(),h=l(m.location),m.keywords&&0!=m.keywords.length||(m.keywords=window.broadstreetKeywords||[]),m.callback&&"function"==typeof m.callback){var t=c("street_callback_");e[t]=m.callback,m.callback=t}if(m.useAltZone%1==0){var n=m.useAltZone;m.useAltZone=function(){return window.innerWidth<=n?(u=!0,!0):(u=!1,!1)},window.addEventListener("resize",A((function(){(u&&!m.useAltZone()||!u&&m.useAltZone())&&o.refreshAll()})),500,!1)}if(m.networkId&&o.loadNetworkJS(m.networkId),m.onlyVisible&&m.onlyVisible.mem_safe&&(window.broadstreet_lazy_zones=[],window.addEventListener("scroll",A((function(){for(var e=0;e<window.broadstreet_lazy_zones.length;e++){var t=window.broadstreet_lazy_zones[e].zone;w(t,window.broadstreet_lazy_zones[e].multiplier)||"true"!=t.getAttribute("hidden")||(t.removeAttribute("hidden"),window.broadstreet_lazy_zones.splice(e,1),S(t))}}),100))),m.altZoneShortlist.length)for(var r=0;r<m.altZoneShortlist.length;r++)m.altZoneShortlist[r]=m.altZoneShortlist[r].toString();if(m.altZoneWhitelist.length)for(var a=0;a<m.altZoneWhitelist.length;a++)m.altZoneWhitelist[a]=m.altZoneWhitelist[a].toString();Object.keys(m.autoAttach).length&&(k()?o.autoAttach():document.addEventListener("DOMContentLoaded",(function(){o.autoAttach()}))),Object.keys(m.autoAttachAndWatch).length&&(k()?o.autoAttachAndWatch():document.addEventListener("DOMContentLoaded",(function(){o.autoAttachAndWatch()})))},S=function(e,t){t=t||{};var o,n,a=e.getAttribute("zone-id")||e.getAttribute("alt-zone-id")||t.zoneId||t.altZoneId,i=e.getAttribute("alt-zone-id"),d=e.getAttribute("no-alt");if(e.getAttribute("zone-alias")&&m.useZoneAliases&&(a=e.getAttribute("zone-alias")),a){var l;if(t=t||{},e.parentNode.tagName.match(/container/i)?l=e.parentNode:(l=document.createElement(m.selector+"-container"+(i?"-alt":"")),e.parentNode.replaceChild(l,e),l.appendChild(e)),d&&m.altZoneWhitelist.push(a),e.removeAttribute("style"),i){if(s[a]||(s[a]={}),s[a].altContainer=l,!m.useAltZone())return}else if(s[a]||(s[a]={}),s[a].container=l,s[a].el=e,m.useAltZone())if(m.altZoneShortlist.length){if(m.altZoneShortlist.indexOf(a)>=0)return}else if(m.altZoneWhitelist.indexOf(a)<0)return;if(n=JSON.parse(JSON.stringify(m)),n=v(n,n.zoneOptions[a]),(n=v(n,t)).onlyVisible||"true"==e.getAttribute("load-when-visible")){var u=1;if(n.onlyVisible&&(u=n.onlyVisible.renderMarginPercent?n.onlyVisible.renderMarginPercent/100+1:1,window.innerWidth<600&&n.onlyVisible.mobileScaling&&(u*=n.onlyVisible.mobileScaling)),w(e,u))return e.setAttribute("hidden","true"),void function(e,t,o){o?broadstreet_lazy_zones.push({zone:e,multiplier:t}):setInterval((function(){w(e,t)||"true"!=e.getAttribute("hidden")||(e.removeAttribute("hidden"),S(e))}),500)}(e,u,n.onlyVisible.mem_safe)}if((o=e.getAttribute("active-style"))&&e.setAttribute("style",o),!e.getAttribute("tracked")&&(e.setAttribute("tracked","true"),!(o=e.getAttribute("autoload"))&&!1!==n.autoload||!(!1===n.autoload||o&&"false"==o.toLowerCase()))){if(o=e.getAttribute("keywords")){n.keywords=n.keywords.concat(o.split(","));for(var h=0;h<n.keywords.length;h++)n.keywords[h]=n.keywords[h].trim().toLowerCase()}(o=e.getAttribute("soft-keywords"))&&(o&&"true"==o.toLowerCase()&&(n.softKeywords=!0),o&&"false"==o.toLowerCase()&&(n.softKeywords=!1)),(o=e.getAttribute("hard-force"))&&o&&"true"==o.toLowerCase()&&(n.hardForce=!0),(o=e.getAttribute("network-id"))&&(n.networkId=o),(o=e.getAttribute("no-rotate"))&&o&&"true"==o.toLowerCase()&&(n.noRotate=!0),(o=e.getAttribute("preview"))&&o&&"true"==o.toLowerCase()&&(n.preview=!0),(o=e.getAttribute("callback"))&&(n.callback=o),(o=e.getAttribute("count"))&&(n.count=o),e.id||(e.id=c("street-")),s[a].opts=n,r.push({id:a,el:e,options:n}),p()}}else console.warn("No zone-id set for zone tag, skipping ...")};o.loadNetworkJS=function(e,t){if(!f){(t=t||{}).domain,o.setOptions(t||{}),m.networkId=e;var n=document.createElement("script");n.type="text/javascript",n.async=m.loadConfigSync,n.src=m.protocol+"//"+m.domain+"/ndisplay/"+e+".js",m.disableCookies&&(n.src+="?dc=true"),document.head.insertBefore(n,document.head.lastChild),f=!0}};var C=function(e,t){return t.el.innerHTML='<div street-address="'+e+'"></div>',"//"+m.domain+"/display/"+e+".js?sa=1&init=0"},z=function(){var e={};if(m.uid&&(e.uid=m.uid),location.hostname&&(e.domain=location.hostname),location.pathname&&(e.path=location.pathname),location.href&&(e.url=location.href),window.navigator&&window.navigator.userAgent){var t=function(){var e=window.navigator.userAgent,t=window.navigator.platform,o={is_mobile:0,os:null,browser:null};return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)?o.os="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(t)?(o.os="iOS",o.is_mobile=1):-1!==["Win32","Win64","Windows","WinCE"].indexOf(t)?o.os="Windows":/Android/.test(e)?(o.os="Android",o.is_mobile=1):/Linux/.test(t)&&(o.os="Linux"),e.match(/Edg/)?o.browser="edge":e.match(/OPR/)?o.browser="opera":e.match(/Chrome/)?o.browser="chrome":e.match(/Firefox/)?o.browser="firefox":e.match(/^(Chrome)|Safari/)?o.browser="safari":e.match(/\.NET/)&&(o.browser="ie"),o}();e.os=t.os,e.browser=t.browser,e.is_mobile=t.is_mobile}return e},O=function(e,o){var r;r=o.useZoneAliases&&o.networkId?m.protocol+"//"+o.domain+"/zndisplay/"+o.networkId+"/"+e+".js":m.protocol+"//"+o.domain+"/zdisplay/"+e+".js",o.uriKeywords&&(o.keywords=o.keywords||[],o.keywords=o.keywords.concat(function(e){var t=e.pathname.indexOf(".");return e.pathname.slice(1,-1!==t?t:void 0).split("/")}(o.location)));var a=function(e){e=e||{};for(var t={},o=Object.keys(e),n=0;n<o.length;n++)t["bst_"+o[n]]=e[o[n]];return t}(o.targets);return r+="?b="+n,o.keywords&&(a.kw=function(e){return"function"==typeof e.join?e.join(","):e}(o.keywords)),a.kw||delete a.kw,o.count&&(a.count=o.count),o.deviceOverride&&(a.device=o.deviceOverride),o.softKeywords&&(a.skw="true"),o.hardForce&&(a.hf="true"),o.noRotate&&(a.nr="true"),void 0!==o.place&&(a.place=o.place),o.amp&&(a.amp="true"),o.adOverride&&(a.ao=o.adOverride),o.campaignOverride&&(a.co=o.campaignOverride),o.callback&&(a.cb=o.callback),o.hostname&&(a.hostname=o.hostname),o.seed&&(a.seed=o.seed),o.preview&&(a.preview="true"),o.useCachebuster&&(a.ts=t),o.passTargetsToDestination&&(a.pt="true"),o.disableCookies&&(a.dc="true"),o.userId&&(a.uid=o.userId),o.clickUrl&&(a.click_url=o.clickUrl),o.clickPrefix&&(a.click_prefix=o.clickPrefix),a=Object.assign(a,z()),r+"&"+b(a)};return o.addCSS=function(e){var t=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e)),t.appendChild(o)},o.clearCampaignLog=function(){n=""},o.loadAMPZone=function(e,t){(t=t||{}).ampGlobal&&t.ampGlobal.context&&t.ampGlobal.context.location&&(t.location=m.location=t.ampGlobal.context.location,t.hostname=t.location.hostname,console.debug("Broadstreet AMP Render Start, no resize"),t.ampGlobal.context.renderStart(),t.seed=t.ampGlobal.context.pageViewId),_(),o.loadZone(e,t)},o.loadZone=function(e,t){(t=t||{}).autoload=!0,e.tagName||(e=document.querySelector(e)),e.removeAttribute("autoload"),e.removeAttribute("tracked"),e.innerHTML="",S(e,t)},o.watchFor=a,o.refreshAll=function(){var e=document.querySelectorAll(m.selector);o.clearCampaignLog();for(var t=0;t<e.length;t++)o.loadZone(e[t])},o.register=function(e){n+=n?","+e:e},o.setTargeting=function(e,t){"object"==typeof e?m.targets=v(m.targets,e):m.targets[e]=t},o.setOptions=function(e){m=v(m,e)},o.trackHover=function(e,t){e.onmouseover=void 0;var o=z();t+="?"+b(o);var n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.open("GET",t,!0),n.send()},o.watch=function(e){window.broadstreetLoaded?console.warn("broadstreet.watch() has been called multiple times. Ignoring calls beyond the first."):(window.broadstreetLoaded=!0,o.setOptions(e||{}),_(),a(m.selector,S))},o.loadAd=function(e,t,o){var n;if(!i){var r=document.createElement("script");r.type="text/javascript",r.async=!0;var a=z(),d=b(a);r.src="//localhost:9090/display/"+e+".js?sa_v2=1&init=0&"+d+(o&&"%"!==o[0]?"&click_url="+o:"")+(t&&"%"!==t[0]?"&destination="+t:""),r.onload=r.onreadystatechange=r.onerror=function(e){n||r.readyState&&"loaded"!==r.readyState&&"complete"!==r.readyState||(n=!0,i=!1,r.onload=r.onreadystatechange=r.onerror=null,document.head&&r.parentNode&&document.head.removeChild(r))},i=!0,document.head.insertBefore(r,document.head.lastChild)}},o.deprecated=function(e){return function(){console.warn("broadstreet."+e,"is no longer a supported method call. Please see: http://information.broadstreetads.com/using-broadstreets-v2-ad-tags/")}},o.setDefaultAsync=o.deprecated("setDefaultAsync"),o.setWhitelabel=o.deprecated("setWhitelabel"),o.zone=function(e){"loading"==document.readyState&&document.write("<"+m.selector+' zone-id="'+e+'"></'+m.selector+">"),o.deprecated("zone")()},window.broadstreet&&window.broadstreet.run&&(o.run=window.broadstreet.run),o}()}(this),window.broadstreet.run&&window.broadstreet.run.length)for(var i=0;i<window.broadstreet.run.length;i++)window.broadstreet.run[i]();window.broadstreet.run={push:function(e){e()}};for(var ad_tags=document.querySelectorAll("ins[data-street-address]"),j=0;j<ad_tags.length;j++){var ad_id=ad_tags[j].getAttribute("data-street-address"),destination=ad_tags[j].getAttribute("data-destination"),click_url=ad_tags[j].getAttribute("data-click-url");window.broadstreet.loadAd(ad_id,destination,click_url)}if(document.querySelectorAll('ins[data-type="broadstreet"][data-zone-id]').forEach((function(e){window.broadstreet.loadZone(e,e.dataset)})),window.addEventListener("message",(function(e){if("bsa_visibility_check"===e.data.action){var t=e.source.frameElement,o=t.getBoundingClientRect();o.top>=0&&o.left>=0&&o.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&o.right<=(window.innerWidth||document.documentElement.clientWidth)?t.contentWindow.postMessage("visible","*"):t.contentWindow.postMessage("not visible","*")}}),!1),document.dispatchEvent)try{document.dispatchEvent(new Event("broadstreetLoaded"))}catch(e){}